const puppeteer = require("puppeteer")
const fs = require("fs")
const path = require("path")
const axios = require("axios")
const { createCursor } = require("ghost-cursor")


const url = "https://leagueoflegends.fandom.com/wiki/Teamfight_Tactics"
const heroNameSelector = "#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div > a:nth-child(2)"
const heroImageSelector = "#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div > a:nth-child(1) > img"
const firstHero = "#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div:nth-child(1) > a:nth-child(2)"
const lastHero = "#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div:nth-last-child(1) > a:nth-child(2)"

const itemIcons = "[{\"imageName\":\"Deathblade TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/ee/Deathblade_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165820\"},{\"imageName\":\"Giant Slayer item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/21/Giant_Slayer_item.png/revision/latest/scale-to-width-down/46?cb=20171221183216\"},{\"imageName\":\"Hextech Gunblade TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/db/Hextech_Gunblade_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028164744\"},{\"imageName\":\"Spear of Shojin TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/a/a9/Spear_of_Shojin_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210423143127\"},{\"imageName\":\"Edge of Night item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/69/Edge_of_Night_item.png/revision/latest/scale-to-width-down/46?cb=20201027200343\"},{\"imageName\":\"Bloodthirster TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/8/88/Bloodthirster_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173010\"},{\"imageName\":\"Zeke's Herald TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/94/Zeke%27s_Herald_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165519\"},{\"imageName\":\"Infinity Edge TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c6/Infinity_Edge_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180040\"},{\"imageName\":\"Shimmerscale Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1c/Shimmerscale_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215324\"},{\"imageName\":\"Giant Slayer item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/21/Giant_Slayer_item.png/revision/latest/scale-to-width-down/46?cb=20171221183216\"},{\"imageName\":\"Rapid Firecannon item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/92/Rapid_Firecannon_item.png/revision/latest/scale-to-width-down/46?cb=20211001052608\"},{\"imageName\":\"Guinsoo's Rageblade item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/95/Guinsoo%27s_Rageblade_item.png/revision/latest/scale-to-width-down/46?cb=20201029192542\"},{\"imageName\":\"Statikk Shiv TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b1/Statikk_Shiv_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165006\"},{\"imageName\":\"Titan's Resolve TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/00/Titan%27s_Resolve_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165359\"},{\"imageName\":\"Runaan's Hurricane TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/64/Runaan%27s_Hurricane_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173406\"},{\"imageName\":\"Zz'Rot Portal item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/fb/Zz%27Rot_Portal_item.png/revision/latest/scale-to-width-down/46?cb=20171222002817\"},{\"imageName\":\"Mortal Reminder item old.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b2/Mortal_Reminder_item_old.png/revision/latest/scale-to-width-down/46?cb=20201016200158\"},{\"imageName\":\"Ragewing Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/03/Ragewing_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215322\"},{\"imageName\":\"Hextech Gunblade TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/db/Hextech_Gunblade_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028164744\"},{\"imageName\":\"Guinsoo's Rageblade item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/95/Guinsoo%27s_Rageblade_item.png/revision/latest/scale-to-width-down/46?cb=20201029192542\"},{\"imageName\":\"Rabadon's Deathcap TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c7/Rabadon%27s_Deathcap_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173516\"},{\"imageName\":\"Archangel's Staff TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/00/Archangel%27s_Staff_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173655\"},{\"imageName\":\"Locket of the Iron Solari TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b3/Locket_of_the_Iron_Solari_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180114\"},{\"imageName\":\"Ionic Spark TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3a/Ionic_Spark_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028164859\"},{\"imageName\":\"Morellonomicon TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3c/Morellonomicon_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173822\"},{\"imageName\":\"Jeweled Gauntlet TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/9c/Jeweled_Gauntlet_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184315\"},{\"imageName\":\"Dragonmancer Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c8/Dragonmancer_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717213010\"},{\"imageName\":\"Spear of Shojin TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/a/a9/Spear_of_Shojin_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210423143127\"},{\"imageName\":\"Statikk Shiv TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b1/Statikk_Shiv_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165006\"},{\"imageName\":\"Archangel's Staff TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/00/Archangel%27s_Staff_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173655\"},{\"imageName\":\"Blue Buff TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/39/Blue_Buff_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20200602111652\"},{\"imageName\":\"Frozen Heart item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/58/Frozen_Heart_item.png/revision/latest/scale-to-width-down/46?cb=20210904173935\"},{\"imageName\":\"Chalice of Power TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1d/Chalice_of_Power_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20200602111601\"},{\"imageName\":\"Redemption item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/94/Redemption_item.png/revision/latest/scale-to-width-down/46?cb=20210904174044\"},{\"imageName\":\"Hand of Justice TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f1/Hand_of_Justice_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184244\"},{\"imageName\":\"Mage Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5b/Mage_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717225036\"},{\"imageName\":\"Edge of Night item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/69/Edge_of_Night_item.png/revision/latest/scale-to-width-down/46?cb=20201027200343\"},{\"imageName\":\"Titan's Resolve TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/00/Titan%27s_Resolve_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165359\"},{\"imageName\":\"Locket of the Iron Solari TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b3/Locket_of_the_Iron_Solari_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180114\"},{\"imageName\":\"Frozen Heart item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/58/Frozen_Heart_item.png/revision/latest/scale-to-width-down/46?cb=20210904173935\"},{\"imageName\":\"Bramble Vest TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/98/Bramble_Vest_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904174151\"},{\"imageName\":\"Gargoyle Stoneplate TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/fd/Gargoyle_Stoneplate_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904174333\"},{\"imageName\":\"Sunfire Cape TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/77/Sunfire_Cape_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904174719\"},{\"imageName\":\"Shroud of Stillness TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/07/Shroud_of_Stillness_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180200\"},{\"imageName\":\"Cavalier Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/66/Cavalier_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210717105840\"},{\"imageName\":\"Bloodthirster TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/8/88/Bloodthirster_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173010\"},{\"imageName\":\"Runaan's Hurricane TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/64/Runaan%27s_Hurricane_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173406\"},{\"imageName\":\"Ionic Spark TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3a/Ionic_Spark_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028164859\"},{\"imageName\":\"Chalice of Power TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1d/Chalice_of_Power_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20200602111601\"},{\"imageName\":\"Gargoyle Stoneplate TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/fd/Gargoyle_Stoneplate_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904174333\"},{\"imageName\":\"Dragon's Claw TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/0d/Dragon%27s_Claw_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028164600\"},{\"imageName\":\"Zephyr item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/11/Zephyr_item.png/revision/latest/scale-to-width-down/46?cb=20171222002733\"},{\"imageName\":\"Quicksilver TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/05/Quicksilver_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184346\"},{\"imageName\":\"Mirage Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f8/Mirage_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215323\"},{\"imageName\":\"Zeke's Herald TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/94/Zeke%27s_Herald_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165519\"},{\"imageName\":\"Zz'Rot Portal item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/fb/Zz%27Rot_Portal_item.png/revision/latest/scale-to-width-down/46?cb=20171222002817\"},{\"imageName\":\"Morellonomicon TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3c/Morellonomicon_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904173822\"},{\"imageName\":\"Redemption item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/94/Redemption_item.png/revision/latest/scale-to-width-down/46?cb=20210904174044\"},{\"imageName\":\"Sunfire Cape TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/77/Sunfire_Cape_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904174719\"},{\"imageName\":\"Zephyr item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/11/Zephyr_item.png/revision/latest/scale-to-width-down/46?cb=20171222002733\"},{\"imageName\":\"Warmog's Armor item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/9f/Warmog%27s_Armor_item.png/revision/latest/scale-to-width-down/46?cb=20210904172723\"},{\"imageName\":\"Banshee's Claw TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/d3/Banshee%27s_Claw_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210717094919\"},{\"imageName\":\"Guardian Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/45/Guardian_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215323\"},{\"imageName\":\"Infinity Edge TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c6/Infinity_Edge_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180040\"},{\"imageName\":\"Mortal Reminder item old.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b2/Mortal_Reminder_item_old.png/revision/latest/scale-to-width-down/46?cb=20201016200158\"},{\"imageName\":\"Jeweled Gauntlet TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/9c/Jeweled_Gauntlet_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184315\"},{\"imageName\":\"Hand of Justice TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f1/Hand_of_Justice_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184244\"},{\"imageName\":\"Shroud of Stillness TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/07/Shroud_of_Stillness_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210904180200\"},{\"imageName\":\"Quicksilver TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/05/Quicksilver_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184346\"},{\"imageName\":\"Banshee's Claw TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/d3/Banshee%27s_Claw_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210717094919\"},{\"imageName\":\"Thief's Gloves TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1a/Thief%27s_Gloves_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20190925184416\"},{\"imageName\":\"Assassin Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/e5/Assassin_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211023121104\"},{\"imageName\":\"Shimmerscale Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1c/Shimmerscale_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215324\"},{\"imageName\":\"Ragewing Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/03/Ragewing_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215322\"},{\"imageName\":\"Dragonmancer Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c8/Dragonmancer_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717213010\"},{\"imageName\":\"Mage Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5b/Mage_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717225036\"},{\"imageName\":\"Cavalier Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/66/Cavalier_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20210717105840\"},{\"imageName\":\"Mirage Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f8/Mirage_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215323\"},{\"imageName\":\"Guardian Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/45/Guardian_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20220717215323\"},{\"imageName\":\"Assassin Emblem TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/e5/Assassin_Emblem_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211023121104\"},{\"imageName\":\"Tactician's Crown TFT item.png\",\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/ce/Tactician%27s_Crown_TFT_item.png/revision/latest/scale-to-width-down/46?cb=20211028165252\"}]"
const uncraftableIcons = "[{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/76/Astral_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214428\",\"alt\":\"Astral Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/d4/Bruiser_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20211028200753\",\"alt\":\"Bruiser Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/fb/Cannoneer_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717114745\",\"alt\":\"Cannoneer Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c8/Dragonmancer_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717213010\",\"alt\":\"Dragonmancer Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/05/Evoker_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214428\",\"alt\":\"Evoker Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/58/Guild_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214429\",\"alt\":\"Guild Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/4b/Jade_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717213110\",\"alt\":\"Jade Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/94/Legend_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717221923\",\"alt\":\"Legend Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/da/Mystic_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717114749\",\"alt\":\"Mystic Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/43/Revel_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214430\",\"alt\":\"Revel Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/52/Scalescorn_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717215321\",\"alt\":\"Scalescorn Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/db/Swiftshot_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214431\",\"alt\":\"Swiftshot Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/ec/Tempest_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717212846\",\"alt\":\"Tempest Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/8/89/Warrior_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717214432\",\"alt\":\"Warrior Emblem\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c7/Whispers_Emblem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717212637\",\"alt\":\"Whispers Emblem\"}]"
const shimmerscale = "[{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/a/a3/Crown_of_Champions_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230558\",\"alt\":\"Crown of Champions\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/47/Determined_Investor_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230559\",\"alt\":\"Determined Investor\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/7a/Diamond_Hands_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230559\",\"alt\":\"Diamond Hands\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c8/Draven%27s_Axe_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230600\",\"alt\":\"Draven's Axe\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/73/Gambler%27s_Blade_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230601\",\"alt\":\"Gambler's Blade\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f0/Goldmancer%27s_Staff_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230602\",\"alt\":\"Goldmancer's Staff\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/1c/Mogul%27s_Mail_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230602\",\"alt\":\"Mogul's Mail\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/a/a9/Needlessly_Big_Gem_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220717230603\",\"alt\":\"Needlessly Big Gem\"}]"
const artifact = "[{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/60/Anima_Visage_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144106\",\"alt\":\"Anima Visage\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/76/Death%27s_Defiance_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144117\",\"alt\":\"Death's Defiance\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/0c/Eternal_Winter_item.png/revision/latest/scale-to-width-down/20?cb=20201125104901\",\"alt\":\"Eternal Winter\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/2e/Gold_Collector_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144312\",\"alt\":\"Gold Collector\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/f/f1/Infinity_Force_item.png/revision/latest/scale-to-width-down/20?cb=20201125104950\",\"alt\":\"Infinity Force\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/eb/Manazane_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144126\",\"alt\":\"Manazane\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/56/Obsidian_Cleaver_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144135\",\"alt\":\"Obsidian Cleaver\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/a/a0/Randuin%27s_Sanctum_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144144\",\"alt\":\"Randuin's Sanctum\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/29/Rocket-Propelled_Fist_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144153\",\"alt\":\"Rocket-Propelled Fist\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5a/Zhonya%27s_Paradox_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123144201\",\"alt\":\"Zhonya's Paradox\"}]"
const radiant = "[{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/76/Banshee%27s_Silence_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171954\",\"alt\":\"Banshee's Silence\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/31/Blessed_Bloodthirster_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171956\",\"alt\":\"Blessed Bloodthirster\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/8/8a/Blue_Blessing_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171958\",\"alt\":\"Blue Blessing\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/66/Brink_of_Dawn_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203154229\",\"alt\":\"Brink of Dawn\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/e9/Chalice_of_Charity_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172000\",\"alt\":\"Chalice of Charity\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/2f/Covalent_Spark_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203124012\",\"alt\":\"Covalent Spark\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/47/Demon_Slayer_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172004\",\"alt\":\"Demon Slayer\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5d/Dragon%27s_Will_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203124021\",\"alt\":\"Dragon's Will\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/20/Dvarapala_Stoneplate_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172008\",\"alt\":\"Dvarapala Stoneplate\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/56/Eternal_Whisper_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172010\",\"alt\":\"Eternal Whisper\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/e7/Fist_of_Fairness_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172012\",\"alt\":\"Fist of Fairness\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c2/Frozen_Heart_of_Gold_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172014\",\"alt\":\"Frozen Heart of Gold\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b6/Glamorous_Gauntlet_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172016\",\"alt\":\"Glamorous Gauntlet\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/95/Guinsoo%27s_Reckoning_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172032\",\"alt\":\"Guinsoo's Reckoning\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/ce/Hextech_Lifeblade_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203124031\",\"alt\":\"Hextech Lifeblade\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/7/7b/Locket_of_Targon_Prime_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172022\",\"alt\":\"Locket of Targon Prime\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/9d/Luminous_Deathblade_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172024\",\"alt\":\"Luminous Deathblade\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/25/Mistral_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172026\",\"alt\":\"Mistral\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/cb/More_More-ellonomicon_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172028\",\"alt\":\"More More-ellonomicon\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/2/2f/Quickestsilver_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172034\",\"alt\":\"Quickestsilver\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/0b/Rabadon%27s_Ascended_Deathcap_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172030\",\"alt\":\"Rabadon's Ascended Deathcap\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3f/Radiant_Redemption_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172036\",\"alt\":\"Radiant Redemption\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3e/Rapid_Lightcannon_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172038\",\"alt\":\"Rapid Lightcannon\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/d2/Rascal%27s_Gloves_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172040\",\"alt\":\"Rascal's Gloves\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3f/Rosethorn_Vest_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172042\",\"alt\":\"Rosethorn Vest\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/3c/Runaan%27s_Tempest_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172045\",\"alt\":\"Runaan's Tempest\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/01/Shroud_of_Reverence_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172047\",\"alt\":\"Shroud of Reverence\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/9/91/Spear_of_Hirana_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172049\",\"alt\":\"Spear of Hirana\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/4/4b/Statikk_Favor_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203123945\",\"alt\":\"Statikk Favor\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5a/Sunlight_Cape_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717172053\",\"alt\":\"Sunlight Cape\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/e/e2/Titan%27s_Vow_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203123955\",\"alt\":\"Titan's Vow\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/8/87/Urf-Angel%27s_Staff_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171944\",\"alt\":\"Urf-Angel's Staff\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/c/c2/Warmog%27s_Pride_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171946\",\"alt\":\"Warmog's Pride\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/57/Zeke%27s_Harmony_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20220203124003\",\"alt\":\"Zeke's Harmony\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/d/d6/Zenith_Edge_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171950\",\"alt\":\"Zenith Edge\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/3/39/Zz%27Rot%27s_Invitation_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210717171952\",\"alt\":\"Zz'Rot's Invitation\"}]"
const consumables = "[{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/b/b7/Twisted_Fate_Loaded_Dice.png/revision/latest/scale-to-width-down/20?cb=20150312021516\",\"alt\":\"Loaded Dice\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/0/03/Heimerdinger_Hextech_Affinity.png/revision/latest/scale-to-width-down/20?cb=20140317234847\",\"alt\":\"Magnetic Remover\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5b/Neeko_Shapesplitter.png/revision/latest/scale-to-width-down/20?cb=20181119234349\",\"alt\":\"Neeko's Help\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/1/17/Ornn_Living_Forge.png/revision/latest/scale-to-width-down/20?cb=20170816203351\",\"alt\":\"Reforger\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/5/5e/Target_Dummy_TFT_item.png/revision/latest/scale-to-width-down/20?cb=20210123151046\",\"alt\":\"Target Dummy\"},{\"src\":\"https://static.wikia.nocookie.net/leagueoflegends/images/6/6f/Will_of_the_Ancients_item.png/revision/latest/scale-to-width-down/20?cb=20171223021758\",\"alt\":\"Tome of Traits\"}]"
/*
Get image link
document.querySelector("#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div:nth-child(2) > a:nth-child(1) > img").src

Get hero name
document.querySelector("#mw-content-text > div.mw-parser-output > div.main-page-tag-lcs.main-page-tag-lcs-exploded > div > div.portal.TFTRenderRoster > div.portal__wrapper > div > div > div > div:nth-child(2) > a:nth-child(2)").innerHTML

*/

const downloadImage = (url, image_path) =>
    axios({
        url,
        responseType: 'stream',
    }).then(
        response =>
            new Promise((resolve, reject) => {
                response.data
                    .pipe(fs.createWriteStream(image_path))
                    .on('finish', () => resolve())
                    .on('error', e => reject(e));
            }),
    );


const downloadUncraftable = async () => {
    let icons = JSON.parse(consumables)
    icons.forEach(({alt,src})=> {
        const dirPath = path.join("items", alt)
        if (!fs.existsSync(dirPath)) {
            fs.mkdirSync(dirPath);
        }
        const imagePath = path.join(dirPath,"icon.png")
        downloadImage(src,imagePath).catch(console.error)
    })
}

const downloadItemIcons = async () => {
    let icons = JSON.parse(itemIcons)
    icons =  icons.filter(item => !item.imageName.endsWith(" old.png")).map(({imageName,src}) => {
        const newName = imageName.split(" TFT item.png")[0].split(" item.png")[0]
        return {
            src,
            imageName:newName
        }
    })
    icons.forEach(({imageName,src})=> {
        const dirPath = path.join("items", imageName)
        if (!fs.existsSync(dirPath)) {
            fs.mkdirSync(dirPath);
        }
        const imagePath = path.join(dirPath,"icon.png")
        downloadImage(src,imagePath).catch(console.error)
    })

}

const downloadHeroImages = async () => {
    const browser = await puppeteer.launch({
        headless: false
    })
    const page = await browser.newPage()
    await page.goto(url,{
        waitUntil:"networkidle0",
        timeout:0
    })
    const cursor = createCursor(page)
    await cursor.move(firstHero)
    await page.waitForTimeout(1000)
    await cursor.move(lastHero)

    const heroNames = await page.evaluate((selector) => {
        const nodeList = document.querySelectorAll(selector)
        const arr = Array.from(nodeList)
        return arr.map((item) => item.innerHTML)
    }, heroNameSelector)

    heroNames.forEach((item) => {
        const dirPath = path.join("content", item)
        if (!fs.existsSync(dirPath)) {
            fs.mkdirSync(dirPath);
        }

    })


    const images = await page.evaluate((selector) => {
        const nodeList = document.querySelectorAll(selector)
        const arr = Array.from(nodeList)
        return arr.map((item) => item.src)
    }, heroImageSelector)



    images.forEach((item,index) => {
        const dirPath = path.join("content", heroNames[index])
        const imagePath = path.join(dirPath,"icon.png")
        downloadImage(item,imagePath).catch(console.error)
    })


    await browser.close()

}

downloadUncraftable()
